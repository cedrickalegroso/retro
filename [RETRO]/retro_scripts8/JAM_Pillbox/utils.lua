Keys={["ESC"]=322,["F1"]=288,["F2"]=289,["F3"]=170,["F5"]=166,["F6"]=167,["F7"]=168,["F8"]=169,["F9"]=56,["F10"]=57,["~"]=243,["1"]=157,["2"]=158,["3"]=160,["4"]=164,["5"]=165,["6"]=159,["7"]=161,["8"]=162,["9"]=163,["-"]=84,["="]=83,["BACKSPACE"]=177,["TAB"]=37,["Q"]=44,["W"]=32,["E"]=38,["R"]=45,["T"]=245,["Y"]=246,["U"]=303,["P"]=199,["["]=116,["]"]=40,["ENTER"]=18,["CAPS"]=137,["A"]=34,["S"]=8,["D"]=9,["F"]=23,["G"]=47,["H"]=74,["K"]=311,["L"]=182,["LEFTSHIFT"]=21,["Z"]=20,["X"]=73,["C"]=26,["V"]=0,["B"]=29,["N"]=249,["M"]=244,[","]=82,["."]=81,["LEFTCTRL"]=36,["LEFTALT"]=19,["SPACE"]=22,["RIGHTCTRL"]=70,["HOME"]=213,["PAGEUP"]=10,["PAGEDOWN"]=11,["DELETE"]=178,["LEFT"]=174,["RIGHT"]=175,["UP"]=27,["DOWN"]=173,["NENTER"]=201,["N4"]=108,["N5"]=60,["N6"]=107,["N+"]=96,["N-"]=97,["N7"]=117,["N8"]=61,["N9"]=118}Weapons={Melee={'WEAPON_KNIFE','WEAPON_KNUCKLE','WEAPON_NIGHTSTICK','WEAPON_HAMMER','WEAPON_BAT','WEAPON_GOLFCLUB','WEAPON_CROWBAR','WEAPON_BOTTLE','WEAPON_DAGGER','WEAPON_HATCHET','WEAPON_MACHETE','WEAPON_SWITCHBLADE','WEAPON_POOLCUE'},Pistol={'WEAPON_REVOLVER','WEAPON_PISTOL','WEAPON_PISTOL_MK2','WEAPON_COMBATPISTOL','WEAPON_APPISTOL','WEAPON_PISTOL50','WEAPON_SNSPISTOL','WEAPON_HEAVYPISTOL','WEAPON_VINTAGEPISTOL','WEAPON_DOUBLEACTION','WEAPON_REVOLVER_MK2','WEAPON_SNSPISTOL_MK2'},SMG={'WEAPON_MICROSMG','WEAPON_MINISMG','WEAPON_SMG','WEAPON_SMG_MK2','WEAPON_ASSAULTSMG','WEAPON_MACHINEPISTOL'},MG={'WEAPON_MG','WEAPON_COMBATMG','WEAPON_COMBATMG_MK2'},Assault={'WEAPON_ASSAULTRIFLE','WEAPON_ASSAULTRIFLE_MK2','WEAPON_CARBINERIFLE','WEAPON_CARBINERIFLE_MK2','WEAPON_ADVANCEDRIFLE','WEAPON_SPECIALCARBINE','WEAPON_BULLPUPRIFLE','WEAPON_COMPACTRIFLE','WEAPON_SPECIALCARBINE_MK2','WEAPON_BULLPUPRIFLE_MK2'},Shotgun={'WEAPON_PUMPSHOTGUN','WEAPON_SAWNOFFSHOTGUN','WEAPON_BULLPUPSHOTGUN','WEAPON_ASSAULTSHOTGUN','WEAPON_HEAVYSHOTGUN','WEAPON_DBSHOTGUN','WEAPON_PUMPSHOTGUN_MK2'}}Utils={}function Utils:DrawTextTemplate(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x)return{text="",x=-1,y=-1,font=d or 6,scale1=e or 0.5,scale2=f or 0.5,colour1=g or 255,colour2=h or 255,colour3=i or 255,colour4=j or 255,wrap1=k or 0.0,wrap2=l or 1.0,centre=type(m)~="boolean"and true or m,outline=n or 1,dropshadow1=o or 2,dropshadow2=p or 0,dropshadow3=q or 0,dropshadow4=r or 0,dropshadow5=s or 0,edge1=t or 255,edge2=u or 255,edge3=v or 255,edge4=w or 255,edge5=x or 255}end;function Utils:DrawText(y)if not y or not y.text or y.text==""or y.x==-1 or y.y==-1 then return false end;SetTextFont(y.font)SetTextScale(y.scale1,y.scale2)SetTextColour(y.colour1,y.colour2,y.colour3,y.colour4)SetTextWrap(y.wrap1,y.wrap2)SetTextCentre(y.centre)SetTextOutline(y.outline)SetTextDropshadow(y.dropshadow1,y.dropshadow2,y.dropshadow3,y.dropshadow4,y.dropshadow5)SetTextEdge(y.edge1,y.edge2,y.edge3,y.edge4,y.edge5)SetTextEntry("STRING")AddTextComponentSubstringPlayerName(y.text)DrawText(y.x,y.y)return true end;function Utils.PointOnSphere(z,A,B,C,D,E)local F=0.017453292384744;z,A,B,C,D,E=(tonumber(z or 0)or 0)*F,(tonumber(A or 0)or 0)*F,tonumber(B or 0)or 0,tonumber(C or 0)or 0,tonumber(D or 0)or 0,tonumber(E or 0)or 0;if vector3 then return vector3(C+B*math.sin(A)*math.cos(z),D+B*math.cos(A)*math.cos(z),E+B*math.sin(z))end end;function Utils.ClampCircle(b,c,B)b=tonumber(b or 0)or 0;c=tonumber(c or 0)or 0;B=tonumber(B or 0)or 0;local G=math.sqrt(b*b+c*c)G=B/G;if G<1 then b=b*G/B*B;c=c*G/B*B end;return b,c end;function Utils.GetHashKey(H)if type(H)=="number"then return H end;return GetHashKeyPrev(tostring(H or"")or"")%0x100000000 end;GetHashKeyPrev=GetHashKeyPrev or GetHashKey;GetHashKey=Utils.GetHashKey;function Utils:FindNearestZone(I,table)if type(table)~='table'or type(I)~='vector3'then return 999999 end;local J,K,L,M;for N,O in pairs(table)do if O.Positions then for P,Q in pairs(O.Positions)do if type(Q)=='vector3'then local R=Utils:GetVecDist(I,Q)if not L or R<L then J,K,L,M=O,P,R,Q end end end end end;return J,K,L,M end;function string.tohex(S,T)S=type(S)=="string"and S or type(S)=="nil"and""or tostring(S)T=T or 2048;local U={}string.tohex_sformat=string.tohex_sformat and string.tohex_chunkSize and string.tohex_chunkSize==T and string.tohex_sformat or string.rep("%02X",math.min(#S,T))string.tohex_chunkSize=string.tohex_chunkSize and string.tohex_chunkSize==T and string.tohex_chunkSize or T;for V=1,#S,T do U[#U+1]=string.format(string.tohex_sformat:sub(1,math.min(#S-V+1,T)*4),S:byte(V,V+T-1))end;if#U==1 then return U[1]else return table.concat(U,"")end end;function Utils.GetXYDist(W,X,Y,Z,_,a0)return math.sqrt(((W or 0)-(Z or 0))*((W or 0)-(Z or 0))+((X or 0)-(_ or 0))*((X or 0)-(_ or 0))+((Y or 0)-(a0 or 0))*((Y or 0)-(a0 or 0)))end;function Utils:GetV2Dist(a1,a2)if not a1 or not a2 or not a1.x or not a2.x or not a1.y or not a2.y then return 0 end;return math.sqrt(((a1.x or 0)-(a2.x or 0))*((a1.x or 0)-(a2.x or 0))+((a1.y or 0)-(a2.y or 0))*((a1.y or 0)-(a2.y or 0)))end;function Utils:GetVecDist(a1,a2)if not a1 or not a2 or not a1.x or not a2.x then return 0 end;return math.sqrt(((a1.x or 0)-(a2.x or 0))*((a1.x or 0)-(a2.x or 0))+((a1.y or 0)-(a2.y or 0))*((a1.y or 0)-(a2.y or 0))+((a1.z or 0)-(a2.z or 0))*((a1.z or 0)-(a2.z or 0)))end;function Utils.GetCoordsInFrontOfCam(...)local function a3(a1,a2)if not a1 or not a1.x then return 0 end;a2=a2 or vector3(0,0,0)return math.sqrt(((a1.x or 0)-(a2.x or 0))*((a1.x or 0)-(a2.x or 0))+((a1.y or 0)-(a2.y or 0))*((a1.y or 0)-(a2.y or 0))+((a1.z or 0)-(a2.z or 0))*((a1.z or 0)-(a2.z or 0)))end;local a4=GetGameplayCamCoord()local a5=GetGameplayCamRot(2)local a6=vector3(math.sin(a5.z*3.141593/180)*-1*math.abs(math.cos(a5.x)),math.cos(a5.z*3.141593/180)*math.abs(math.cos(a5.x)),math.sin(a5.x*3.141593/180))local a7=a3(a4-GetEntityCoords(PlayerPedId(),false)or vector3(0,0,0))local a8={}if select("#",...)==0 then return vector3(a4.x+1*a6.x,a4.y+1*a6.y,a4.z+1*a6.z)end;for a9=1,select("#",...)do local aa=select(a9,...)+a7;if type(aa)=="number"then if aa==0 then a8[a9]=a4 else a8[a9]=vector3(a4.x+aa*a6.x,a4.y+aa*a6.y,a4.z+aa*a6.z)end end end;return unpack(a8)end;function Utils.RotationToDirection(a5)return vector3(math.sin(a5.z*3.141593/180)*-1*math.abs(math.cos(a5.x)),math.cos(a5.z*3.141593/180)*math.abs(math.cos(a5.x)),math.sin(a5.x*3.141593/180))end;function Utils.LoadModel(ab,ac)local ad=Utils.GetHashKey(ab)if ac then while not HasModelLoaded(ad)do Citizen.Wait(0)RequestModel(ad)end else RequestModel(ad)end;return true end;function Utils.ReleaseModel(ab)local ad=Utils.GetHashKey(ab)if HasModelLoaded(ad)then SetModelAsNoLongerNeeded(ad)end;return true end;function Utils:LoadModelTable(table)if type(table)~='table'then return false end;for a9,ae in pairs(table)do if type(ae)=='string'then local ad=Utils.GetHashKey(ae)while not HasModelLoaded(ad)do RequestModel(ad)Citizen.Wait(0)end end end;return true end;function Utils:ReleaseModelTable(table)if type(table)~='table'then return false end;for a9,ae in pairs(table)do if type(ae)=='string'then local ad=Utils.GetHashKey(ae)if HasModelLoaded(ad)then SetModelAsNoLongerNeeded(ad)end end end;return true end;function Utils.LoadWeaponTable(table)if type(table)~='table'then return false end;for a9,ae in pairs(table)do if type(ae)=='string'then local ad=Utils.GetHashKey(ae)while not HasWeaponAssetLoaded(ad)do RequestWeaponAsset(ad)Citizen.Wait(0)end end end;return true end;function Utils.ReleaseWeaponTable(table)if type(table)~='table'then return false end;for a9,ae in pairs(table)do if type(ae)=='string'then local ad=Utils.GetHashKey(ae)if HasWeaponAssetLoaded(ad)then RemoveWeaponAsset(ad)end end end;return true end;function Utils.LoadAnimTable(table)if type(table)~='table'then return false end;for a9,ae in pairs(table)do if type(ae)=='string'then while not HasAnimDictLoaded(ae)do RequestAnimDict(ae)Citizen.Wait(0)end end end;return true end;function Utils.ReleaseAnimTable(table)if type(table)~='table'then return false end;for a9,ae in pairs(table)do if type(ae)=='string'then if HasAnimDictLoaded(ae)then RemoveAnimDict(ae)end end end;return true end;function Utils:LoadAnimDict(af)if type(af)~='string'then return false end;while not HasAnimDictLoaded(af)do RequestAnimDict(af)Citizen.Wait(0)end;return true end;function Utils:ReleaseAnimDict(af)if type(af)~='string'then return false end;if HasAnimDictLoaded(af)then RemoveAnimDict(af)end;return true end;function Utils.NetworkControlEntity(ag)if type(ag)~='number'then return false end;while not NetworkHasControlOfEntity(ag)do NetworkRequestControlOfEntity(ag)Citizen.Wait(0)end;return true end;function Utils.NetworkControlDoor(ah)if type(ah)~='number'then return false end;while not NetworkHasControlOfDoor(ah)do NetworkRequestControlOfDoor(ah)Citizen.Wait(0)end;return true end;function Utils.InRange(ai,aj,ak)if aj+ak>ai and aj-ak<ai then return true else return false end end;math.pow=math.pow or function(al,am)return(al or 1)^(am or 1)end;function Utils:Round(ai,an)ai,an=ai or 0,an or 0;return ai<0 and math.floor(math.abs(ai*math.pow(10,an))+0.5)*math.pow(10,an*-1)*-1 or math.floor(math.abs(ai*math.pow(10,an))+0.5)*math.pow(10,an*-1)end;function Utils:GetKeyPressed(ao)if not ao then return false end;if IsDisabledControlJustPressed(0,Keys[ao])or IsControlJustPressed(0,Keys[ao])then return true else return false end end;function Utils:GetKeyHeld(ao)if not ao then return false end;if IsDisabledControlPressed(0,Keys[ao])or IsControlPressed(0,Keys[ao])then return true else return false end end;function Utils:DrawText3D(b,c,ap,a)local aq,ar,as=World3dToScreen2d(b,c,ap)local at,au,av=table.unpack(GetGameplayCamCoord())local aw=GetDistanceBetweenCoords(at,au,av,b,c,ap,1)local an=1/aw*2*1/GetGameplayCamFov()*100;if aq then SetTextColour(220,220,220,255)SetTextScale(0.0*an,0.40*an)SetTextFont(4)SetTextProportional(1)SetTextCentre(true)BeginTextCommandWidth("STRING")AddTextComponentString(a)local ax=GetTextScaleHeight(0.45*an,4)local ay=EndTextCommandGetWidth(4)SetTextEntry("STRING")AddTextComponentString(a)EndTextCommandDisplayText(ar,as)DrawRect(ar,as+an/73,ay,ax,35,35,35,200)end end
