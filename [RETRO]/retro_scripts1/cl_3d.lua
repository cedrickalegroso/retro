local a=0.5;local b={r=230,g=230,b=230,a=255}local c=0;local d=5000;local e=250;local f={}local function g(h,i)local j=GetGameplayCamCoord()local k=#(h-j)local l=200/(GetGameplayCamFov()*k)SetTextColour(b.r,b.g,b.b,b.a)SetTextScale(0.0,a*l)SetTextDropshadow(0,0,0,0,55)SetTextDropShadow()SetTextCentre(true)BeginTextCommandDisplayText("STRING")AddTextComponentSubstringPlayerName(i)SetDrawOrigin(h,0)EndTextCommandDisplayText(0.0,0.0)ClearDrawOrigin()end;local function m(n,i)local o=PlayerPedId()local p=GetEntityCoords(o)local q=GetEntityCoords(n)local k=#(p-q)if k<=e then f[n]=(f[n]or 1)+1;local r=true;Citizen.CreateThread(function()Wait(d)r=false end)local s=0.8+f[n]*0.1;while r do if HasEntityClearLosToEntity(o,n,17)then local t,u,v=table.unpack(GetEntityCoords(n))v=v+s;g(vector3(t,u,v),i)end;Wait(0)end;f[n]=f[n]-1 end end;RegisterNetEvent('3dme:shareDisplay')AddEventHandler('3dme:shareDisplay',function(i,w)local x=GetPlayerFromServerId(w)if x~=-1 then local n=GetPlayerPed(x)m(n,i)end end)
